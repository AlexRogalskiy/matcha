<details>
  <summary>
    <h3 id="preview-website"><a href="#preview-website">üïµÔ∏è Preview any website with <em>matcha.css</em></a></h3>
  </summary>
  <p>
    You can use the form below to preview any website with <em>matcha.css</em>.
  </p>
  <form>
    <label for="url">
      Website URL:
      <small>
        Previewed site will be trimmed from their <code data-hl="html">&lt;style&gt;</code> and <code data-hl="html">&lt;script&gt;</code> tags.
        External resources may not be properly loaded, this form is only intended for a quick preview.
      </small>
      <input list="preview-datalist" type="url" placeholder="https://example.com" required>
      <datalist id="preview-datalist">
        <option value="https://example.com"></option>
        <option value="https://perfectmotherfuckingwebsite.com"></option>
      </datalist>
    </label>
    <footer>
      <button type="submit">Preview</button>
    </footer>
  </form>
  <iframe loading="lazy" title="preview" height="420" style="border: 1px solid var(--bd-muted)"></iframe>
  <script>
    {
      const form = document.currentScript.parentElement.querySelector("form")
      const iframe = document.currentScript.parentElement.querySelector("iframe")
      form.addEventListener("submit", async event => {
        event.preventDefault()
        iframe.src = `/api/preview?url=${form.querySelector("input").value}`
        iframe.onload = function() {
          const origin = new URL(new URL(iframe.src).searchParams.get("url")).href
          iframe.contentDocument.querySelectorAll("style,script").forEach(element => element.remove())
          const link = iframe.contentDocument.createElement("link")
          link.href = "/matcha.css"
          link.rel = "stylesheet"
          iframe.contentDocument.head.appendChild(link)
        }
      })
    }
  </script>
</details>